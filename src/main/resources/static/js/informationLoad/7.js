(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{DGrs:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var s=i("OZ4H"),a=i("EM62"),o=i("m1yc"),n=i("2kYt");function r(t,e){if(1&t&&(a.Qb(0),a.Dc(1),a.Pb()),2&t){const t=a.ec().$implicit;a.Bb(1),a.Fc(" ",t," ")}}function l(t,e){if(1&t&&(a.Sb(0,"li"),a.Bc(1,r,2,1,"ng-container",2),a.Rb()),2&t){const t=e.$implicit;a.Bb(1),a.jc("ngIf",t)}}let c=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e,this.showSubmit=!1}ngOnInit(){this.massiveLoadErrors=this.data.massiveLoadErrors}onClose(){this.dialogRef.close()}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(s.a),a.Mb(s.f))},t.\u0275cmp=a.Gb({type:t,selectors:[["infL-error-dialog"]],decls:4,vars:2,consts:[["title","Resultados de la carga masiva",3,"showSubmit","closeEvent"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(t,e){1&t&&(a.Sb(0,"shared-form-dialog",0),a.ac("closeEvent",(function(){return e.onClose()})),a.Sb(1,"div"),a.Sb(2,"ul"),a.Bc(3,l,2,1,"li",1),a.Rb(),a.Rb(),a.Rb()),2&t&&(a.jc("showSubmit",e.showSubmit),a.Bb(3),a.jc("ngForOf",e.massiveLoadErrors))},directives:[o.f,n.k,n.l],styles:["ul[_ngcontent-%COMP%]{list-style:none}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{color:#000;font-weight:700}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(-n+3){border-left:1px solid #000;border-right:1px solid #000;padding:4px 24px;color:#5a5}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{border-top:1px solid #000}ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:nth-child(3){border-bottom:1px solid #000}"]}),t})()},"YM+i":function(t,e,i){"use strict";i.r(e),i.d(e,"ServicePointsModule",(function(){return lt}));var s=i("2kYt"),a=i("40Bj"),o=i("nIj0"),n=i("m1yc"),r=i("PCNd"),l=i("sEIs"),c=i("OZ4H"),d=i("EM62"),b=i("YtkY"),u=i("ruxD"),m=i("qFEQ"),h=i("29Wa"),p=i("Cd2c"),f=i("R7+U"),g=i("mFH5");function y(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("mandatoryField"))}}function v(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("maxOf")+"10 "+t.dictionary.translate("characters"))}}function S(t,e){1&t&&(d.Qb(0),d.Dc(1," PSCode duplicado "),d.Pb())}function C(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("mandatoryField"))}}function B(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("maxOf")+"200 "+t.dictionary.translate("characters"))}}function R(t,e){if(1&t&&(d.Sb(0,"mat-option",14),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.jc("value",t.value),d.Bb(1),d.Fc(" ",t.label," ")}}function F(t,e){if(1&t&&(d.Sb(0,"mat-option",14),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.jc("value",t.value),d.Bb(1),d.Fc(" ",t.label," ")}}function D(t,e){if(1&t&&(d.Sb(0,"mat-option",14),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.jc("value",t.value),d.Bb(1),d.Fc(" ",t.label," ")}}function x(t,e){if(1&t&&(d.Sb(0,"mat-option",14),d.Dc(1),d.Rb()),2&t){const t=e.$implicit;d.jc("value",t.value),d.Bb(1),d.Fc(" ",t.label," ")}}function E(t,e){if(1&t&&(d.Sb(0,"mat-form-field"),d.Sb(1,"mat-label"),d.Dc(2),d.Rb(),d.Sb(3,"mat-select",15),d.Bc(4,x,2,2,"mat-option",8),d.Rb(),d.Sb(5,"mat-error"),d.Dc(6),d.Rb(),d.Rb()),2&t){const t=d.ec();d.Bb(2),d.Ec(t.dictionary.translate("distributor")+"*"),d.Bb(2),d.jc("ngForOf",t.distributors),d.Bb(2),d.Fc(" ",t.dictionary.translate("mandatoryField")," ")}}function j(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("mandatoryField"))}}function O(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("maxOf")+"200 "+t.dictionary.translate("characters"))}}function N(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("mandatoryField"))}}function L(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("maxOf")+"50 "+t.dictionary.translate("characters"))}}function M(t,e){if(1&t&&(d.Qb(0),d.Dc(1),d.Pb()),2&t){const t=d.ec();d.Bb(1),d.Ec(t.dictionary.translate("maxOf")+"20 "+t.dictionary.translate("characters"))}}let w=(()=>{class t{constructor(t,e,i,s,a,o){this.fb=t,this.fs=e,this.sps=i,this.cs=s,this.os=a,this.changeDetectorRef=o,this.cummins=window.cummins,this.validDates=!0,this.disabledEvent=new d.o,this.types=[],this.countries=[],this.oems=[],this.distributors=[]}get spCode(){return this.mainForm.get("spCode")}get name(){return this.mainForm.get("name")}get type(){return this.mainForm.get("type")}get country(){return this.mainForm.get("country")}get oem(){return this.mainForm.get("oem")}get distributor(){return this.mainForm.get("distributor")}get address(){return this.mainForm.get("address")}get cityState(){return this.mainForm.get("cityState")}get localityCode(){return this.mainForm.get("localityCode")}ngOnInit(){this.isNew=!this.data,this.setupForm(),this.sps.bringTheActivesDrDrl().subscribe(t=>{this.types=t}),this.cs.bringTheActivesCPR2().subscribe(t=>{this.countries=t}),this.os.bringTheActivesOems().subscribe(t=>{this.oems=t}),this.sps.bringTheActivesDistributors().subscribe(t=>{this.distributors=t}),this.type.valueChanges.subscribe(t=>{2==this.type.value?this.distributor.setValidators([o.s.required]):(this.distributor.setValue(null),this.distributor.clearValidators()),this.distributor.updateValueAndValidity()})}disableFields(){this.fs.disableFields(this.mainForm)}enableFields(){this.fs.enableFields(this.mainForm),this.isNew||(this.spCode.disable(),this.name.disable(),this.type.disable(),this.country.disable(),this.oem.disable(),this.distributor.disable(),this.address.disable(),this.cityState.disable(),this.localityCode.disable())}submit(){const t=this.mainForm.value;let e;return e={spCode:t.spCode.toUpperCase(),providerName:t.name.toUpperCase(),responsibleBranchCode:1==t.type?t.spCode:t.distributor,idPais:t.country,idOem:t.oem,add:t.address.toUpperCase(),city:t.cityState.toUpperCase(),iso:t.localityCode.toUpperCase(),tipo:t.type,del:"N"},this.isNew?this.sps.save(e):this.sps.update(e,e.spCode)}setupForm(){this.mainForm=this.fb.group({spCode:[null,[o.s.required,o.s.maxLength(10)],this.duplicatedPSCodeValidator.bind(this)],name:[null,[o.s.required,o.s.maxLength(200)]],type:[null,[o.s.required]],country:[null,[o.s.required]],oem:[null,[o.s.required]],distributor:[null],address:[null,[o.s.required,o.s.maxLength(200)]],cityState:[null,[o.s.required,o.s.maxLength(50)]],localityCode:[null,[o.s.maxLength(20)]],del:null}),this.isNew||(this.mainForm.patchValue({spCode:this.data.spCode,name:this.data.providerName,type:this.data.tipo,country:this.data.idPais,oem:this.data.idOem,distributor:this.data.spCode===this.data.responsibleBranchCode?"":this.data.responsibleBranchCode,address:this.data.add,cityState:this.data.city,localityCode:this.data.iso,del:this.data.delete}),this.spCode.disable())}duplicatedPSCodeValidator(t){return this.sps.findByCriteria({spCode:t.value,del:"N"}).pipe(Object(b.a)(t=>0===t.length||1==t.length&&!this.isNew?null:{duplicated:!0}),Object(u.a)(()=>this.changeDetectorRef.markForCheck()))}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(o.d),d.Mb(n.g),d.Mb(n.s),d.Mb(n.c),d.Mb(n.m),d.Mb(d.h))},t.\u0275cmp=d.Gb({type:t,selectors:[["infL-main-form"]],inputs:{data:"data",dictionary:"dictionary"},decls:64,vars:26,consts:[["autocomplete","off",3,"formGroup"],["fxLayout","row","fxLayout.xs","column"],["fxFlex","100%"],["formControlName","spCode","matInput","",3,"placeholder"],[4,"ngIf"],["formControlName","name","matInput","",3,"placeholder"],["fxFlex","50%"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","country"],["formControlName","oem"],["formControlName","address","matInput","",3,"placeholder"],["formControlName","cityState","matInput","",3,"placeholder"],["formControlName","localityCode","matInput","",3,"placeholder"],[3,"value"],["formControlName","distributor"]],template:function(t,e){1&t&&(d.Sb(0,"form",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"mat-form-field"),d.Nb(4,"input",3),d.Sb(5,"mat-error"),d.Bc(6,y,2,1,"ng-container",4),d.Bc(7,v,2,1,"ng-container",4),d.Bc(8,S,2,0,"ng-container",4),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(9,"div",1),d.Sb(10,"div",2),d.Sb(11,"mat-form-field"),d.Nb(12,"input",5),d.Sb(13,"mat-error"),d.Bc(14,C,2,1,"ng-container",4),d.Bc(15,B,2,1,"ng-container",4),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(16,"div",1),d.Sb(17,"div",6),d.Sb(18,"mat-form-field"),d.Sb(19,"mat-label"),d.Dc(20),d.Rb(),d.Sb(21,"mat-select",7),d.Bc(22,R,2,2,"mat-option",8),d.Rb(),d.Sb(23,"mat-error"),d.Dc(24),d.Rb(),d.Rb(),d.Rb(),d.Sb(25,"div",6),d.Sb(26,"mat-form-field"),d.Sb(27,"mat-label"),d.Dc(28),d.Rb(),d.Sb(29,"mat-select",9),d.Bc(30,F,2,2,"mat-option",8),d.Rb(),d.Sb(31,"mat-error"),d.Dc(32),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(33,"div",1),d.Sb(34,"div",6),d.Sb(35,"mat-form-field"),d.Sb(36,"mat-label"),d.Dc(37),d.Rb(),d.Sb(38,"mat-select",10),d.Bc(39,D,2,2,"mat-option",8),d.Rb(),d.Sb(40,"mat-error"),d.Dc(41),d.Rb(),d.Rb(),d.Rb(),d.Sb(42,"div",6),d.Bc(43,E,7,3,"mat-form-field",4),d.Rb(),d.Rb(),d.Sb(44,"div",1),d.Sb(45,"div",2),d.Sb(46,"mat-form-field"),d.Nb(47,"input",11),d.Sb(48,"mat-error"),d.Bc(49,j,2,1,"ng-container",4),d.Bc(50,O,2,1,"ng-container",4),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(51,"div",1),d.Sb(52,"div",2),d.Sb(53,"mat-form-field"),d.Nb(54,"input",12),d.Sb(55,"mat-error"),d.Bc(56,N,2,1,"ng-container",4),d.Bc(57,L,2,1,"ng-container",4),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Sb(58,"div",1),d.Sb(59,"div",2),d.Sb(60,"mat-form-field"),d.Nb(61,"input",13),d.Sb(62,"mat-error"),d.Bc(63,M,2,1,"ng-container",4),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Rb()),2&t&&(d.jc("formGroup",e.mainForm),d.Bb(4),d.jc("placeholder",e.dictionary.translate("spCode")+" *"),d.Bb(2),d.jc("ngIf",e.spCode.invalid&&e.spCode.errors.required),d.Bb(1),d.jc("ngIf",e.spCode.invalid&&e.spCode.errors.maxlength),d.Bb(1),d.jc("ngIf",e.spCode.invalid&&e.spCode.errors.duplicated),d.Bb(4),d.jc("placeholder",e.dictionary.translate("name")+" *"),d.Bb(2),d.jc("ngIf",e.name.invalid&&e.name.errors.required),d.Bb(1),d.jc("ngIf",e.name.invalid&&e.name.errors.maxlength),d.Bb(5),d.Ec(e.dictionary.translate("type")+"*"),d.Bb(2),d.jc("ngForOf",e.types),d.Bb(2),d.Fc(" ",e.dictionary.translate("mandatoryField")," "),d.Bb(4),d.Ec(e.dictionary.translate("country")+"*"),d.Bb(2),d.jc("ngForOf",e.countries),d.Bb(2),d.Fc(" ",e.dictionary.translate("mandatoryField")," "),d.Bb(5),d.Ec(e.dictionary.translate("oem")+"*"),d.Bb(2),d.jc("ngForOf",e.oems),d.Bb(2),d.Fc(" ",e.dictionary.translate("mandatoryField")," "),d.Bb(2),d.jc("ngIf",2==e.type.value),d.Bb(4),d.jc("placeholder",e.dictionary.translate("address")+" *"),d.Bb(2),d.jc("ngIf",e.address.invalid&&e.address.errors.required),d.Bb(1),d.jc("ngIf",e.address.invalid&&e.address.errors.maxlength),d.Bb(4),d.jc("placeholder",e.dictionary.translate("cityState")+" *"),d.Bb(2),d.jc("ngIf",e.cityState.invalid&&e.cityState.errors.required),d.Bb(1),d.jc("ngIf",e.cityState.invalid&&e.cityState.errors.maxlength),d.Bb(4),d.jc("placeholder",e.dictionary.translate("localityCode")),d.Bb(2),d.jc("ngIf",e.localityCode.invalid&&e.localityCode.errors.maxlength))},directives:[o.t,o.m,o.f,m.c,m.a,h.c,o.c,p.b,o.l,o.e,h.b,s.l,h.f,f.a,s.k,g.n],styles:[".mat-form-field[_ngcontent-%COMP%]{min-inline-size:95%}"]}),t})(),I=(()=>{class t{constructor(t,e,i){this.data=t,this.dialogRef=e,this.message=i,this.loading=!1}ngOnInit(){this.title=this.data.dictionary.translate(this.data.spCode?"editSpCode":"addSpCode")}onClose(){this.dialogRef.close()}onSubmit(){this.loading=!0,this.mfc.disableFields(),this.mfc.submit().subscribe(t=>{this.loading=!1,this.mfc.enableFields(),this.dialogRef.close({})},t=>{this.loading=!1,this.mfc.enableFields(),this.message.genericHttpError()})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(c.a),d.Mb(c.f),d.Mb(n.k))},t.\u0275cmp=d.Gb({type:t,selectors:[["infL-main-form-dialog"]],viewQuery:function(t,e){var i;1&t&&d.Hc(w,!0),2&t&&d.pc(i=d.bc())&&(e.mfc=i.first)},decls:2,vars:7,consts:[[3,"disabled","loading","title","submitText","cancelText","closeEvent","submitEvent"],[2,"width","200px",3,"data","dictionary"]],template:function(t,e){1&t&&(d.Sb(0,"shared-form-dialog",0),d.ac("closeEvent",(function(){return e.onClose()}))("submitEvent",(function(){return e.onSubmit()})),d.Nb(1,"infL-main-form",1),d.Rb()),2&t&&(d.jc("disabled",e.loading||(null==e.mfc?null:e.mfc.mainForm.pristine)||!(null!=e.mfc&&e.mfc.mainForm.valid))("loading",e.loading)("title",e.title)("submitText",e.data.dictionary.translate("save"))("cancelText",e.data.dictionary.translate("cancel")),d.Bb(1),d.jc("data",e.data.spCode)("dictionary",e.data.dictionary))},directives:[n.f,w],styles:[""]}),t})();var P=i("DGrs"),k=i("8j5Y"),A=i("J+dc"),q=i("J0Eg");let T=(()=>{class t extends q.a{constructor(t){super(),this.sps=t}loadData(t){let e;return console.log("search"),console.log(t),e=null==t?{spCode:null,providerName:null,responsibleBranchCode:null,idPais:null,idOem:null,add:null,city:null,iso:null,tipo:null,creationDate:null,createdBy:null,lastUpdateDate:null,lastUpdatedBy:null,del:"N"}:{spCode:t.spcode?t.spcode:null,providerName:t.name?t.name:null,responsibleBranchCode:null,idPais:t.country?t.country:null,idOem:t.oem?t.oem:null,add:t.address?t.address:null,city:t.cityState?t.cityState:null,iso:t.localityCode?t.localityCode:null,tipo:t.type?t.type:null,creationDate:null,createdBy:null,lastUpdateDate:null,lastUpdatedBy:null,del:"N"},this.sps.findByCriteria(e).pipe(Object(k.a)(t=>{console.log("response"),console.log(t);for(let e=0;e<t.length;e++)t[e].tipoName=t[e].drdlr.tipo,t[e].countryName=t[e].country.name,t[e].oemName=t[e].oem.oem;this.dataSource.replaceAll(t)}),Object(A.a)(1))}push(t){this.dataSource.push(t)}}return t.\u0275fac=function(e){return new(e||t)(d.Wb(n.s))},t.\u0275prov=d.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=i("+Tre"),U=i("PBFl");function $(t,e){1&t&&d.Nb(0,"shared-progress-bar")}let _=(()=>{class t{constructor(t,e,i,s){this.mts=t,this.message=e,this.dialog=i,this.sps=s,this.columns=G,this.loading=!1,this.operations=H,this.subscriptions=[],this.massLoadFile=[],this.eraseData=!1,this.massiveLoadErrors=[],this.eventListeners(),this.mts.loadData(null).subscribe(t=>{this.dataSource=t})}ngOnInit(){for(let t=0;t<this.columns.length;t++)if(this.columns[t].label=this.dictionary.translate(G[t].label),"operations"==this.columns[t].label)for(let e=0;e<this.columns[t].value.length;e++)this.columns[t].value[e].label=this.dictionary.translate(G[t].value[e].label)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}onOperation(t){switch(t.operation){case"edit":this.onEdit(t.item);break;case"delete":this.onDelete(t.item)}}massLoadFunction(){this.loading=!0,this.sps.massiveLoad(this.massLoadFile[0].data,1==this.eraseData?"1":"0").pipe(Object(u.a)(()=>{this.mts.loadData(null).pipe(Object(u.a)(()=>this.loading=!1)).subscribe(t=>{this.dataSource=t}),this.openResults()})).subscribe(t=>{const e=[];t.forEach(t=>{(null==t?void 0:t.errores)&&(e.push("Registros Actualizados: "+t.registrosActualizados,"Registros Eliminados: "+t.registrosEliminados,"Registros Nuevos: "+t.registrosNuevos),e.push(...t.errores.map(t=>`Renglon: ${t.line} - ${t.errorType}`)))}),this.massiveLoadErrors=e},t=>{this.massiveLoadErrors=t})}onAdd(){this.dialog.open(I,{disableClose:!0,height:"550px",width:"600px",data:{dictionary:this.dictionary,spcode:null}}).afterClosed().subscribe(t=>{t&&(this.mts.push(t),this.mts.loadData(null).subscribe(t=>{this.dataSource=t}),this.message.genericSaveMessage())})}onEdit(t){this.dialog.open(I,{disableClose:!0,height:"550px",width:"600px",data:{dictionary:this.dictionary,spCode:t}}).afterClosed().subscribe(t=>{t&&(this.message.genericSaveMessage(),this.mts.loadData(null).subscribe(t=>{this.dataSource=t}))})}onDelete(t){this.loading=!0,this.sps.delete(t.spCode).subscribe(t=>{this.message.show("SPCode Eliminado"),this.mts.loadData(null).subscribe(t=>{this.dataSource=t}),this.loading=!1},t=>{this.message.genericHttpError(),this.loading=!1})}eventListeners(){this.subscriptions.push(this.mts.dataEvent.subscribe(t=>this.operations.forEach(e=>e.disabled=0===t.length)))}openResults(){this.dialog.open(P.a,{disableClose:!1,height:"400px",width:"600px",data:{massiveLoadErrors:this.massiveLoadErrors}})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(T),d.Mb(n.k),d.Mb(c.b),d.Mb(n.s))},t.\u0275cmp=d.Gb({type:t,selectors:[["infL-main-table"]],inputs:{dictionary:"dictionary"},decls:14,vars:14,consts:[[4,"ngIf"],[1,"mat-elevation-z8","p1"],["fxLayout","row","fxLayout.xs","column","fxLayoutAlign","space-around center"],["accept","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",3,"disabled","files","option","lengthFile"],[3,"ngModel","ngModelChange"],["mat-raised-button","",3,"disabled","click"],[3,"dictionary","columns","data","showPagination","operationEvent"],[3,"text","callback"]],template:function(t,e){1&t&&(d.Bc(0,$,1,0,"shared-progress-bar",0),d.Sb(1,"div",1),d.Sb(2,"div",2),d.Sb(3,"div"),d.Nb(4,"shared-file-upload-control",3),d.Rb(),d.Sb(5,"div"),d.Sb(6,"mat-checkbox",4),d.ac("ngModelChange",(function(t){return e.eraseData=t})),d.Dc(7),d.Rb(),d.Rb(),d.Sb(8,"div"),d.Sb(9,"button",5),d.ac("click",(function(){return e.massLoadFunction()})),d.Dc(10),d.Rb(),d.Rb(),d.Rb(),d.Rb(),d.Nb(11,"br"),d.Sb(12,"shared-search-table",6),d.ac("operationEvent",(function(t){return e.onOperation(t)})),d.Rb(),d.Sb(13,"shared-add-button",7),d.ac("callback",(function(){return e.onAdd()})),d.Rb()),2&t&&(d.jc("ngIf",e.loading),d.Bb(4),d.jc("disabled",!1)("files",e.massLoadFile)("option",e.dictionary.translate("fileUp"))("lengthFile",e.dictionary.translate("lengthFile")),d.Bb(2),d.jc("ngModel",e.eraseData),d.Bb(1),d.Fc(" ",e.dictionary.translate("eraseBefore")," "),d.Bb(2),d.jc("disabled",!e.massLoadFile[0]||e.loading),d.Bb(1),d.Fc(" ",e.dictionary.translate("massive")," "),d.Bb(2),d.jc("dictionary",e.dictionary)("columns",e.columns)("data",e.dataSource)("showPagination",!0),d.Bb(1),d.jc("text",e.dictionary.translate("addSpCode")))},directives:[s.l,m.c,m.b,n.e,Q.a,o.l,o.o,U.b,n.v,n.a,n.o],styles:[""]}),t})();const G=[{key:"spCode",label:"spCode"},{key:"providerName",label:"providerName"},{key:"tipoName",label:"type"},{key:"responsibleBranchCode",label:"distributor"},{key:"oemName",label:"oem"},{key:"operations",label:"actions",type:n.b.Operations,value:[{label:"edit",matIcon:"edit",operation:"edit"},{label:"delete",matIcon:"delete",operation:"delete"}]}],H=[{disabled:!1,faIcon:"faFileExcel",label:"Exportar Reporte",operation:"export"}];function V(t,e){1&t&&d.Nb(0,"shared-progress-bar")}function J(t,e){if(1&t&&(d.Sb(0,"div"),d.Bc(1,V,1,0,"shared-progress-bar",0),d.Nb(2,"infL-main-table",1),d.Rb()),2&t){const t=d.ec();d.Bb(1),d.jc("ngIf",t.loading),d.Bb(1),d.jc("dictionary",t.dictionary)}}let z=(()=>{class t{constructor(t,e,i,s,a,o,r){this.dialog=t,this.message=e,this.mts=i,this.sps=s,this.cs=a,this.os=o,this.tls=r,this.dictionary=new n.j,this.fields=Y,this.loading=!1,this.massLoadFile=[],this.eraseData=!1,this.massiveLoadErrors=[],this.flag=!1}ngOnInit(){this.tls.getLenguaje().subscribe(t=>{this.dictionary.setLanguage(t.language),this.flag=!0}),this.sps.bringTheActivesDrDrl().subscribe(t=>{this.fields[2].options=t}),this.os.bringTheActivesOems().subscribe(t=>{this.fields[4].options=t}),this.sps.bringTheActivesDistributors().subscribe(t=>{this.fields[3].options=t})}massLoadFunction(){this.loading=!0,this.sps.massiveLoad(this.massLoadFile[0].data,1==this.eraseData?"1":"0").pipe(Object(u.a)(()=>{this.mts.loadData(null).pipe(Object(u.a)(()=>this.loading=!1)).subscribe(),this.openResults()})).subscribe(t=>{const e=[];t.forEach(t=>{(null==t?void 0:t.errores)&&(e.push("Registros Actualizados: "+t.registrosActualizados,"Registros Eliminados: "+t.registrosEliminados,"Registros Nuevos: "+t.registrosNuevos),e.push(...t.errores.map(t=>`Renglon: ${t.line} - ${t.errorType}`)))}),this.massiveLoadErrors=e},t=>{this.massiveLoadErrors=t})}onAdd(){this.dialog.open(I,{disableClose:!0,height:"550px",width:"600px",data:{dictionary:this.dictionary,spcode:null}}).afterClosed().subscribe(t=>{t&&(this.mts.push(t),this.mts.loadData(null).subscribe(),this.message.genericSaveMessage())})}onSearch(t){return t?(this.loading=!0,this.mts.loadData(t).subscribe(()=>{},t=>this.message.genericHttpError(t),()=>this.loading=!1)):this.mts.loadData(null).subscribe(),null}openResults(){this.dialog.open(P.a,{disableClose:!1,height:"400px",width:"600px",data:{massiveLoadErrors:this.massiveLoadErrors}})}}return t.\u0275fac=function(e){return new(e||t)(d.Mb(c.b),d.Mb(n.k),d.Mb(T),d.Mb(n.s),d.Mb(n.c),d.Mb(n.m),d.Mb(n.u))},t.\u0275cmp=d.Gb({type:t,selectors:[["infL-main-view"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"dictionary"]],template:function(t,e){1&t&&d.Bc(0,J,3,2,"div",0),2&t&&d.jc("ngIf",e.flag)},directives:[s.l,_,n.o],styles:[""]}),t})();const Y=[{label:"SP Code",type:"text",value:"spcode"},{label:"Nombre",type:"text",value:"name"},{label:"Tipo",options:[],type:"select",value:"type"},{label:"Distribuidor",options:[],type:"select",value:"distributor"},{label:"OEM",options:[],type:"select",value:"oem"}],K=[{component:z,path:""}];let Z=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[l.a.forChild(K)],l.a]}),t})();var W=i("gcUQ"),X=i("KZIX"),tt=i("FlRo"),et=i("cePI"),it=i("iAde"),st=i("k8N0"),at=i("bFHC"),ot=i("Jb3d"),nt=i("66mq"),rt=i("csyo");let lt=(()=>{class t{}return t.\u0275mod=d.Kb({type:t}),t.\u0275inj=d.Jb({factory:function(e){return new(e||t)},imports:[[s.c,Z,a.a,o.g,W.c,h.e,p.c,g.m,f.b,X.a,tt.m,o.q,et.c,it.b,st.a,n.t,r.a,U.c,c.e,at.b,ot.b,nt.b,rt.b,Q.b]]}),t})()}}]);