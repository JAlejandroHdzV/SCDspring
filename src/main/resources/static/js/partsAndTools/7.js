(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"8X93":function(t,e,i){"use strict";i.r(e),i.d(e,"PartMatrixLoadingModule",(function(){return Tt}));var a=i("2kYt"),n=i("40Bj"),s=i("nIj0"),o=i("m1yc"),r=i("PCNd"),c=i("sEIs"),l=i("ruxD"),d=i("OZ4H"),b=i("EM62"),m=i("jIqt"),u=i("YtkY"),h=i("/VsW"),p=i("DGrs"),f=i("J0Eg"),g=i("W1gw");let y=(()=>{class t extends f.a{constructor(t,e){super(),this.pm=t,this._snackBar=e}loadData(t){return this.pm.getFilterAll({matriz:null==t?void 0:t.matriz,noRevision:null==t?void 0:t.noRevision,satatus:null==t?void 0:t.status,nivel:null==t?void 0:t.nivel,creationDate:null==t?void 0:t.creationDate,lastUpdateDate:null==t?void 0:t.lastUpdateDate,del:"N"}).pipe(Object(u.a)(t=>t.map(t=>({nombre:t.nombre,noRevision:t.noRevision,status:t.status.satus,id:t.idMatriz,nivel:t.ns.serviceLevel,creationDate:t.creationDate,lastUpdateDate:t.lastUpdateDate,all:t}),console.log("Data Table",t.all),this.dataSource.replaceAll(t))))}push(t){this.dataSource.push(t)}showSanckBar(t,e,i){this._snackBar.open(t,"OK",{duration:3e3,horizontalPosition:e||"center",verticalPosition:i||"bottom"})}}return t.\u0275fac=function(e){return new(e||t)(b.Wb(o.l),b.Wb(g.a))},t.\u0275prov=b.Ib({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=i("qFEQ"),S=i("29Wa"),R=i("Cd2c"),B=i("R7+U"),F=i("PBFl"),D=i("bFHC"),x=i("mFH5"),w=i("csyo"),C=i("ulve");function N(t,e){1&t&&b.Nb(0,"shared-progress-bar")}function j(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("mandatoryField")," ")}}function L(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("maxOf")+"200 "+t.dictionary.translate("characters")," ")}}function P(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("mandatoryField")," ")}}function E(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("maxOf")+"10 "+t.dictionary.translate("characters")," ")}}function I(t,e){if(1&t&&(b.Sb(0,"mat-option",31),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.jc("value",t.id),b.Bb(1),b.Fc(" ",t.tipo," ")}}function M(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("mandatoryField")," ")}}function k(t,e){if(1&t&&(b.Sb(0,"mat-option",31),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.jc("value",t.id),b.Bb(1),b.Fc(" ",t.serviceLevel," ")}}function O(t,e){if(1&t&&(b.Sb(0,"mat-option",31),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.jc("value",t.idStatus),b.Bb(1),b.Fc(" ",t.status," ")}}function q(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Ec(t.dictionary.translate("mandatoryField"))}}function A(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Ec(t.dictionary.translate("maxOf")+"50 "+t.dictionary.translate("characters"))}}function T(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Ec(t.dictionary.translate("mandatoryField"))}}function $(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Ec(t.dictionary.translate("maxOf")+"50 "+t.dictionary.translate("characters"))}}function z(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Ec(t.dictionary.translate("mandatoryField"))}}function Q(t,e){if(1&t&&(b.Qb(0),b.Dc(1),b.Pb()),2&t){const t=b.ec();b.Bb(1),b.Ec(t.dictionary.translate("maxOf")+"50 "+t.dictionary.translate("characters"))}}function V(t,e){if(1&t&&(b.Sb(0,"mat-option",31),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.jc("value",t.value),b.Bb(1),b.Fc(" ",t.label," ")}}function _(t,e){if(1&t&&(b.Sb(0,"mat-option",31),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.jc("value",t.spCode),b.Bb(1),b.Fc(" ",t.providerName," ")}}function U(t,e){1&t&&b.Nb(0,"mat-spinner",32),2&t&&b.jc("diameter",20)}function W(t,e){if(1&t&&(b.Sb(0,"mat-option",31),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.jc("value",t.idEspm),b.Bb(1),b.Fc(" ",t.name," ")}}function G(t,e){1&t&&b.Nb(0,"mat-spinner",32),2&t&&b.jc("diameter",20)}function H(t,e){if(1&t&&(b.Sb(0,"mat-option",31),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.jc("value",t.value),b.Bb(1),b.Fc(" ",t.label," ")}}function J(t,e){if(1&t&&(b.Sb(0,"mat-option",31),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.jc("value",t.value),b.Bb(1),b.Fc(" ",t.label," ")}}function X(t,e){1&t&&b.Nb(0,"mat-spinner",32),2&t&&b.jc("diameter",20)}function K(t,e){1&t&&b.Nb(0,"mat-spinner",33),2&t&&b.jc("diameter",30)}function Y(t,e){if(1&t){const t=b.Tb();b.Sb(0,"mat-option",53),b.ac("onSelectionChange",(function(){b.sc(t);const i=e.$implicit,a=b.ec().index;return b.ec().setDataByPart(i,a)})),b.Dc(1),b.Rb()}if(2&t){const t=e.$implicit;b.jc("value",t.np),b.Bb(1),b.Fc(" ",t.np," ")}}function Z(t,e){1&t&&b.Nb(0,"mat-spinner",32),2&t&&b.jc("diameter",20)}function tt(t,e){if(1&t){const t=b.Tb();b.Sb(0,"div",34),b.Sb(1,"div",35),b.Sb(2,"mat-form-field",36),b.Sb(3,"mat-label"),b.Dc(4),b.Rb(),b.Sb(5,"input",37),b.ac("focus",(function(){b.sc(t);const i=e.index;return b.ec().fileManageNameControl(i)})),b.Rb(),b.Sb(6,"mat-autocomplete",null,38),b.Bc(8,Y,2,2,"mat-option",39),b.fc(9,"async"),b.Rb(),b.Bc(10,Z,1,1,"mat-spinner",18),b.Rb(),b.Sb(11,"mat-form-field",40),b.Sb(12,"mat-label"),b.Dc(13),b.Rb(),b.Nb(14,"input",41),b.Rb(),b.Sb(15,"mat-form-field",40),b.Sb(16,"mat-label"),b.Dc(17),b.Rb(),b.Nb(18,"input",42),b.Rb(),b.Sb(19,"mat-form-field",43),b.Sb(20,"mat-label"),b.Dc(21),b.Rb(),b.Nb(22,"input",44),b.Rb(),b.Sb(23,"mat-form-field",40),b.Sb(24,"mat-label"),b.Dc(25),b.Rb(),b.Nb(26,"input",45),b.Rb(),b.Sb(27,"mat-form-field",40),b.Sb(28,"mat-label"),b.Dc(29),b.Rb(),b.Nb(30,"input",46),b.Rb(),b.Sb(31,"div",47),b.Sb(32,"section",48),b.Sb(33,"mat-label",49),b.Dc(34),b.Rb(),b.Nb(35,"input",50),b.Rb(),b.Rb(),b.Sb(36,"div",51),b.Sb(37,"button",52),b.ac("click",(function(){b.sc(t);const i=e.index;return b.ec().deleteItem(i)})),b.Sb(38,"mat-icon"),b.Dc(39,"delete"),b.Rb(),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&t){const t=e.index,i=b.qc(7),a=b.ec();b.Bb(1),b.jc("formGroupName",t),b.Bb(3),b.Ec(a.dictionary.translate("np")),b.Bb(1),b.jc("matAutocomplete",i),b.Bb(3),b.jc("ngForOf",b.gc(9,11,a.filteredOptions[t])),b.Bb(2),b.jc("ngIf",a.loadProd),b.Bb(3),b.Ec(a.dictionary.translate("npLast")),b.Bb(4),b.Ec(a.dictionary.translate("npEqual")),b.Bb(4),b.Ec(a.dictionary.translate("desc")),b.Bb(4),b.Ec(a.dictionary.translate("points")),b.Bb(4),b.Ec(a.dictionary.translate("cant")),b.Bb(5),b.Ec("No "+a.dictionary.translate("points"))}}let et=(()=>{class t{constructor(t,e,i,a,n,s,o,r,c,l,d,m,u,h){this.fb=t,this.fs=e,this.pms=i,this.fileS=a,this.changeDetectorRef=n,this.sl=s,this.ss=o,this.ts=r,this.rs=c,this.sps=l,this.ms=d,this.oems=m,this.mts=u,this.dialog=h,this.ummins=window.cummins,this.disabledEvent=new b.o,this.specification=[],this.statusList=[],this.nServiceList=[],this.typeList=[],this.regionList=[],this.distList=[],this.modelsList=[],this.loading=!1,this.loadProd=!1,this.loadDist=!1,this.loadModel=!1,this.editRegion=!1,this.oemList=[],this.channelList=[],this.npList=[],this.filteredOptions=[],this.dataNp=[],this.namesDistArray=[],this.namesModelArray=[],this.massiveLoadErrors=[],this.flagMassive=!1}ngOnInit(){this.loadProd=!0,this.message=this.dictionary.translate("msgCreate"),this.isNew=!this.data,console.log("New",this.isNew),this.title=this.dictionary.translate(this.isNew?"addPart":"editPart"),this.ss.bringTheActives().subscribe(t=>{this.statusList=[...t]}),this.sl.getActives().subscribe(t=>{this.nServiceList=[...t]}),this.ts.bringTheActives().subscribe(t=>{this.typeList=[...t]}),this.rs.bringTheActivesOnes().subscribe(t=>{this.regionList=[...t]}),this.oems.bringTheActivesOems().subscribe(t=>{this.oemList=[...t]}),this.sps.bringTheActivesDrDrl().subscribe(t=>{this.channelList=[...t]}),this.pms.bringPartsActives().subscribe(t=>{this.loadProd=!1,this.npList=[...t],this.items=this.orderForm.get("items"),this.ManageNameControl(this.items.length-1)}),this.setupForm()}ngOnDestroy(){this.filteredOptions.length=0}get name(){return this.mainForm.get("name")}get noRevision(){return this.mainForm.get("noRevision")}get type(){return this.mainForm.get("type")}get nivelService(){return this.mainForm.get("nivelService")}get status(){return this.mainForm.get("status")}get so(){return this.mainForm.get("so")}get esn(){return this.mainForm.get("esn")}get cpl(){return this.mainForm.get("cpl")}get region(){return this.mainForm.get("region")}get dist(){return this.mainForm.get("dist")}get model(){return this.mainForm.get("model")}get oem(){return this.mainForm.get("oem")}get channel(){return this.mainForm.get("channel")}getDataInfoParts(t){this.loading=!0,this.pms.getDataInfo(t).subscribe(t=>{this.loading=!1,console.log("Response",t),this.mainForm.patchValue({name:t.matriz.nombre,noRevision:t.matriz.noRevision,type:t.matriz.tipo.id,nivelService:t.matriz.ns.id,status:t.matriz.status.idStatus,so:t.matriz.so,esn:t.matriz.esn,cpl:t.matriz.cpl,region:t.region.id,dist:this.findValuesSelected(t.atributos,1),model:this.findValuesSelected(t.atributos,2),oem:this.findValuesSelected(t.atributos,3),channel:this.findValuesSelected(t.atributos,4)}),this.bringTheDistbyRegion(t.region.id),this.setDataRows(t.detalles),this.namesDist=String(this.namesDistArray),this.namesModel=String(this.namesModelArray)})}bringTheDistbyRegion(t){this.loadDist=!0,this.loadModel=!0,this.ms.getDistByRegion(t).subscribe(t=>{this.loadDist=!1,this.distList=[...t],console.log("Dist ",this.distList)}),this.ms.bringThemActivesbyRegion(t).subscribe(t=>{this.loadModel=!1,this.modelsList=[...t],console.log("Model ",this.modelsList)})}setupForm(){this.mainForm=this.fb.group({name:[null,[s.u.required,s.u.maxLength(200)]],noRevision:[null,[s.u.required,s.u.maxLength(10)]],type:[null,[s.u.required]],nivelService:[null,[s.u.required]],status:[null,[s.u.required]],so:["",[s.u.maxLength(50)]],esn:["",[s.u.maxLength(50)]],cpl:["",[s.u.maxLength(50)]],region:[null,[s.u.required]],dist:[null,[s.u.required]],model:[null,[s.u.required]],oem:[null,[s.u.required]],channel:[null,[s.u.required]]}),this.orderForm=this.fb.group({np:["",[s.u.required]],npLast:[{value:"",disabled:!0}],npEqual:[{value:"",disabled:!0}],desc:[{value:"",disabled:!0}],points:[null,[s.u.required,s.u.min(.01),s.u.max(100)]],min:[null,[s.u.required,s.u.min(0)]],check:[!1],items:this.fb.array([this.createItem()])}),this.isNew||(this.message=this.dictionary.translate("msgEdit"),this.esn.disable(),this.so.disable(),this.cpl.disable(),1===this.orderForm.get("items").length&&this.deleteItem(0),console.log("ID",this.data.all.idMatriz),this.getDataInfoParts(this.data.all.idMatriz))}ManageNameControl(t){const e=this.orderForm.get("items");this.filteredOptions[t]=e.at(t).get("np").valueChanges.pipe(Object(m.a)(""),Object(u.a)(t=>"string"==typeof t?t:t.np),Object(u.a)(t=>t?this._filter(t):this.npList.slice()))}fileManageNameControl(t){if(this.flagMassive){const e=this.orderForm.get("items");this.filteredOptions[t]=e.at(t).get("np").valueChanges.pipe(Object(m.a)(""),Object(u.a)(t=>"string"==typeof t?t:t.np),Object(u.a)(t=>t?this._filter(t):this.npList.slice()))}}_filter(t){const e=t.toLowerCase();return this.npList.filter(t=>0===t.np.toLowerCase().indexOf(e))}findValuesSelected(t,e){console.log("find Value");let i=[];const a=t.filter(t=>t.tipoAtributo===e);switch(e){case 1:a.map(t=>{console.log("Push"),this.namesDistArray.push(t.nombre),i.push(t.idText)});break;case 2:a.map(t=>{console.log("Push"),this.namesModelArray.push(t.nombre),i.push(t.idNumber)});break;default:a.map(t=>{console.log("Push"),i.push(t.idNumber)})}return console.log("V "+e,i),i}editToRegion(){this.editRegion=!0,this.dist.enable(),this.model.enable()}disableFields(){this.fs.disableFields(this.mainForm)}enableFields(){this.fs.enableFields(this.mainForm)}createItem(){return this.fb.group({np:["",[s.u.required]],npLast:[""],npEqual:[""],desc:[""],points:[null,[s.u.required,s.u.min(.01),s.u.max(100)]],min:[null,[s.u.required,s.u.min(1)]],check:[!1]})}createItemWithData(t){return console.log("Item NP ",t),this.fb.group({np:[t.np,[s.u.required]],npLast:[t.partes.nPAnterior],npEqual:[t.partes.nPEquivalente],desc:[t.partes.dSpanish],points:[t.ponderacion,[s.u.required,s.u.min(.01),s.u.max(100)]],min:[t.qty,[s.u.required,s.u.min(1)]],check:[!1]})}createItemWithXlsx(t,e){if(console.log("Data ",t),console.log("Values",e),e)return this.fb.group({np:[t[0]],npLast:[e.nPAnterior],npEqual:[e.nPEquivalente],desc:[e.dSpanish],points:[t[1]],min:[t[2]],check:[!1]})}findValuesNP(t){return 0===this.orderForm.get("items").controls.filter(e=>e.value.np===String(t[0])).length?this.npList.find(e=>e.np==String(t[0]))||!1:"duplicated"}addItem(){this.items=this.orderForm.get("items"),this.items.push(this.createItem()),this.ManageNameControl(this.items.length-1)}deleteItem(t){this.orderForm.get("items").removeAt(t),this.filteredOptions.splice(t,1)}setDataByPart(t,e){const i=this.orderForm.get("items"),a=i.controls.filter(e=>e.value.np===t.np);console.log("Filter",a),0===a.length?i.at(e).patchValue({npLast:t.nPAnterior,npEqual:t.nPEquivalente,desc:t.dSpanish}):(this.mts.showSanckBar(this.dictionary.translate("validNP")),i.at(e).reset())}setDataRows(t){t.map(t=>{this.items=this.orderForm.get("items"),this.items.push(this.createItemWithData(t)),this.ManageNameControl(this.items.length-1)})}onChargeForm(t){this.items=this.orderForm.get("items"),1===this.items.length&&this.deleteItem(0);const e=[];t.forEach((t,i)=>{const a=this.findValuesNP(t);a&&"duplicated"!=a?(this.items.push(this.createItemWithXlsx(t,a)),void 0===t[1]&&(e.push("","",""),e.push(`${this.dictionary.translate("row")}: ${Number(i+2)} - ${this.dictionary.translate("notValue")} ${this.dictionary.translate("points")}`)),void 0===t[2]&&(e.push("","",""),e.push(`${this.dictionary.translate("row")}: ${Number(i+2)} - ${this.dictionary.translate("notValue")} ${this.dictionary.translate("cant")} `))):void 0===t[0]?void 0===t[1]||void 0===t[2]?(e.push("","",""),e.push(`${this.dictionary.translate("row")}: ${Number(i+2)} - ${this.dictionary.translate("notValue")} NP, ${this.dictionary.translate("points")}, ${this.dictionary.translate("cant")} `)):(e.push("","",""),e.push(`${this.dictionary.translate("row")}: ${Number(i+2)} - ${this.dictionary.translate("notValue")} NP`)):"duplicated"===a?(e.push("","",""),e.push(`${this.dictionary.translate("row")}: ${Number(i+2)} - NP ${t[0]} ${this.dictionary.translate("duplicatedValues")}`)):(e.push("","",""),e.push(`${this.dictionary.translate("row")}: ${Number(i+2)} - NP ${t[0]} ${this.dictionary.translate("notExist")}`))}),e.length>0&&this.openResults(e),0===e.length&&e.push("Datos cargados: "+t.length),this.messageLoad=null}openResults(t){this.dialog.open(p.a,{disableClose:!1,height:"400px",width:"600px",data:{massiveLoadErrors:t}})}onFileChange(t){let e;this.flagMassive=!0;const i=t.target;if(1!==i.files.length)throw new Error("Cannot use multiple files");const a=new FileReader;this.messageLoad=this.dictionary.translate("loading")+"...",a.onload=t=>{const i=h.read(t.target.result,{type:"binary"}),a=i.Sheets[i.SheetNames[0]];console.log("ws",a),e=h.utils.sheet_to_json(a,{header:1});let n=e.filter((t,e)=>0!=e);console.log("Xlsx",n),this.onChargeForm(n)},a.readAsBinaryString(i.files[0])}autoEvaluation(){const t=this.sumPointsChecked();if(console.log("Sum ",t),t<100){let e=100-t;const i=this.orderForm.get("items"),a=i.controls.filter(t=>!1===t.value.check);let n,s;if(console.log("Array UnCheck",a),e%a.length>0){n=(e/a.length).toFixed(2),console.log("Value "+n);let t=0;i.controls.map(i=>{i.value.check||(t++,i.patchValue(t===a.length?{points:e.toFixed(2)}:{points:n}),e-=n)})}else n=e/a.length,s=n*a.length+t,i.controls.map(t=>{t.value.check||t.patchValue({points:n})});console.log("Total ",s)}else this.mts.showSanckBar(this.dictionary.translate("validSum")+" Total "+t)}sumPoints(){const t=this.orderForm.get("items");let e=0;return t.controls.map(t=>{null!=t.value.points&&(e+=parseFloat(t.value.points))}),Number(e.toFixed(2))}sumPointsChecked(){const t=this.orderForm.get("items");let e=0;return t.controls.map(t=>{0!=t.value.check&&(e+=null===t.value.point?0:parseFloat(t.value.points))}),Number(e.toFixed(2))}checkPoints(){const t=this.sumPoints();return 100===t||(this.mts.showSanckBar(this.dictionary.translate("fvalidSum")+" "+t),!1)}getForm(){return this.orderForm.get("items")}changeToCreate(){console.log("eject",this.isNew),this.isNew||(this.isNew=!0,this.title=this.dictionary.translate(this.isNew?"addPart":"editPart"),this.so.enable(),this.esn.enable(),this.cpl.enable(),console.log("T",this.title))}createToDeatilsObject(t){let e=[],i=[],a=!1;return t.controls.map(t=>{i.find(e=>e===t.value.np)?(console.log("Error Np Duplicated"),this.mts.showSanckBar(this.dictionary.translate("validNP")),a=!0):i.push(t.value.np)}),!a&&(t.controls.map(t=>{e.push({np:t.value.np,ponderacion:t.value.points,qty:t.value.min})}),e)}submit(){var t,e;this.disableFields();const i=this.mainForm.value,a=this.orderForm.get("items"),n=this.createToDeatilsObject(a);if(console.log("Detalles ",n),n&&this.checkPoints()){const a={matriz:{idMatriz:this.isNew?"":null===(e=null===(t=this.data)||void 0===t?void 0:t.all)||void 0===e?void 0:e.idMatriz,nombre:i.name,noRevision:i.noRevision,idTipo:i.type,idNs:i.nivelService,idStatus:i.status,so:i.so,esn:i.esn,cpl:i.cpl,del:"N"},detalles:n,atributos:{tipoMatriz:"1",distribuidor:String(i.dist),modProductos:String(i.model),oems:String(i.oem),canal:String(i.channel)}};return console.log("Data save ",a),this.isNew?this.pms.saveInfo(a):this.pms.putInfo(a)}throw this.checkPoints(),new Error}debug(){console.log("Dist Form ",this.mainForm.value.dist),console.log("Model Form ",this.mainForm.value.model)}}return t.\u0275fac=function(e){return new(e||t)(b.Mb(s.f),b.Mb(o.g),b.Mb(o.l),b.Mb(o.d),b.Mb(b.h),b.Mb(o.q),b.Mb(o.t),b.Mb(o.w),b.Mb(o.p),b.Mb(o.r),b.Mb(o.j),b.Mb(o.k),b.Mb(y),b.Mb(d.b))},t.\u0275cmp=b.Gb({type:t,selectors:[["pat-main-form"]],inputs:{data:"data",dictionary:"dictionary"},decls:107,vars:50,consts:[[4,"ngIf"],["autocomplete","off","fxLayout","column","fxFlex","","fxLayoutAlign","center center",1,"form-parts-matrix",3,"formGroup"],["fxFlex","","fxLayout","row","fxLayoutAlign","space-between center",2,"width","90% !important"],["fxFlex","70"],["formControlName","name","matInput","","required","",3,"placeholder","keyup"],["fxFlex","70","fxFlexOffset","3"],["formControlName","noRevision","matInput","","required","",3,"placeholder","keyup"],["fxFlex","50"],["formControlName","type","required","",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["fxFlex","50","fxFlexOffset","2"],["formControlName","nivelService","required","",3,"selectionChange"],["formControlName","status","required","",3,"selectionChange"],["formControlName","so","matInput","",3,"placeholder"],["formControlName","esn","matInput","",3,"placeholder"],["formControlName","cpl","matInput","",3,"placeholder"],["formControlName","region","required","",3,"selectionChange"],["formControlName","dist","multiple","","required",""],["strokeWidth","3",3,"diameter",4,"ngIf"],["formControlName","model","multiple","","required",""],["fxFlex","","fxLayout","row","fxLayoutAlign","center center",2,"width","90% !important"],["formControlName","oem","multiple","","required",""],["formControlName","channel","multiple","","required",""],["fxLayout","column","fxFlex","","fxLayoutAlign","center center",2,"width","100% !important",3,"formGroup"],["fxLayout","row","fxLayoutAlign","center center"],["type","file","accept",".xlsx","multiple","false",3,"disabled","change"],["fxLayout","row","fxLayoutAlign","center center",2,"padding-top","1rem"],["mat-mini-fab","","color","basic",2,"background-color","#007402","color","#ffffff","margin-left","1rem","margin-right","1rem",3,"click"],["mat-mini-fab","","color","accent",2,"background-color","#474847","color","#ffffff",3,"click"],["strokeWidth","5",3,"diameter",4,"ngIf"],["fxLayout","row","fxLayoutAlign","center center","formArrayName","items","style","width: 100% !important",4,"ngFor","ngForOf"],[3,"value"],["strokeWidth","3",3,"diameter"],["strokeWidth","5",3,"diameter"],["fxLayout","row","fxLayoutAlign","center center","formArrayName","items",2,"width","100% !important"],["fxLayout","row","fxLayoutAlign","center center",2,"width","100% !important",3,"formGroupName"],["fxFlex","10"],["type","text","matInput","","formControlName","np","required","",3,"matAutocomplete","focus"],["auto","matAutocomplete"],[3,"value","onSelectionChange",4,"ngFor","ngForOf"],["fxFlex","10","fxFlexOffset","2"],["matInput","","name","npLast","formControlName","npLast","readonly",""],["matInput","","name","npEqual","formControlName","npEqual","readonly",""],["fxFlex","20","fxFlexOffset","2"],["matInput","","formControlName","desc","readonly",""],["matInput","","formControlName","points","type","number","required",""],["matInput","","formControlName","min","type","number","required",""],["fxFlex","8","fxFlexOffset","2"],[2,"text-align","center","display","grid","align-items","center","justify-content","center"],[2,"font-size","0.6rem"],["type","checkbox","formControlName","check"],["fxFlex","5","fxFlexOffset","3"],["mat-mini-fab","","color","warn",3,"click"],[3,"value","onSelectionChange"]],template:function(t,e){1&t&&(b.Bc(0,N,1,0,"shared-progress-bar",0),b.Sb(1,"form",1),b.Sb(2,"h1"),b.Dc(3),b.Rb(),b.Sb(4,"div",2),b.Sb(5,"mat-form-field",3),b.Sb(6,"input",4),b.ac("keyup",(function(){return e.changeToCreate()})),b.Rb(),b.Sb(7,"mat-error"),b.Bc(8,j,2,1,"ng-container",0),b.Bc(9,L,2,1,"ng-container",0),b.Rb(),b.Rb(),b.Sb(10,"mat-form-field",5),b.Sb(11,"input",6),b.ac("keyup",(function(){return e.changeToCreate()})),b.Rb(),b.Sb(12,"mat-error"),b.Bc(13,P,2,1,"ng-container",0),b.Bc(14,E,2,1,"ng-container",0),b.Rb(),b.Rb(),b.Rb(),b.Sb(15,"div",2),b.Sb(16,"mat-form-field",7),b.Sb(17,"mat-label"),b.Dc(18),b.Rb(),b.Sb(19,"mat-select",8),b.ac("selectionChange",(function(){return e.changeToCreate()})),b.Bc(20,I,2,2,"mat-option",9),b.Rb(),b.Sb(21,"mat-error"),b.Bc(22,M,2,1,"ng-container",0),b.Rb(),b.Rb(),b.Sb(23,"mat-form-field",10),b.Sb(24,"mat-label"),b.Dc(25),b.Rb(),b.Sb(26,"mat-select",11),b.ac("selectionChange",(function(){return e.changeToCreate()})),b.Bc(27,k,2,2,"mat-option",9),b.Rb(),b.Sb(28,"mat-error"),b.Dc(29),b.Rb(),b.Rb(),b.Sb(30,"mat-form-field",10),b.Sb(31,"mat-label"),b.Dc(32),b.Rb(),b.Sb(33,"mat-select",12),b.ac("selectionChange",(function(){return e.changeToCreate()})),b.Bc(34,O,2,2,"mat-option",9),b.Rb(),b.Sb(35,"mat-error"),b.Dc(36),b.Rb(),b.Rb(),b.Rb(),b.Sb(37,"div",2),b.Sb(38,"mat-form-field",7),b.Nb(39,"input",13),b.Sb(40,"mat-error"),b.Bc(41,q,2,1,"ng-container",0),b.Bc(42,A,2,1,"ng-container",0),b.Rb(),b.Rb(),b.Sb(43,"mat-form-field",10),b.Nb(44,"input",14),b.Sb(45,"mat-error"),b.Bc(46,T,2,1,"ng-container",0),b.Bc(47,$,2,1,"ng-container",0),b.Rb(),b.Rb(),b.Sb(48,"mat-form-field",10),b.Nb(49,"input",15),b.Sb(50,"mat-error"),b.Bc(51,z,2,1,"ng-container",0),b.Bc(52,Q,2,1,"ng-container",0),b.Rb(),b.Rb(),b.Rb(),b.Sb(53,"div",2),b.Sb(54,"mat-form-field",7),b.Sb(55,"mat-label"),b.Dc(56),b.Rb(),b.Sb(57,"mat-select",16),b.ac("selectionChange",(function(t){return e.bringTheDistbyRegion(t.value)})),b.Bc(58,V,2,2,"mat-option",9),b.Rb(),b.Sb(59,"mat-error"),b.Dc(60),b.Rb(),b.Rb(),b.Sb(61,"mat-form-field",10),b.Sb(62,"mat-label"),b.Dc(63),b.Rb(),b.Sb(64,"mat-select",17),b.Bc(65,_,2,2,"mat-option",9),b.Rb(),b.Sb(66,"mat-error"),b.Dc(67),b.Rb(),b.Bc(68,U,1,1,"mat-spinner",18),b.Rb(),b.Sb(69,"mat-form-field",10),b.Sb(70,"mat-label"),b.Dc(71),b.Rb(),b.Sb(72,"mat-select",19),b.Bc(73,W,2,2,"mat-option",9),b.Rb(),b.Sb(74,"mat-error"),b.Dc(75),b.Rb(),b.Bc(76,G,1,1,"mat-spinner",18),b.Rb(),b.Rb(),b.Sb(77,"div",20),b.Sb(78,"mat-form-field",7),b.Sb(79,"mat-label"),b.Dc(80),b.Rb(),b.Sb(81,"mat-select",21),b.Bc(82,H,2,2,"mat-option",9),b.Rb(),b.Sb(83,"mat-error"),b.Dc(84),b.Rb(),b.Rb(),b.Sb(85,"mat-form-field",10),b.Sb(86,"mat-label"),b.Dc(87),b.Rb(),b.Sb(88,"mat-select",22),b.Bc(89,J,2,2,"mat-option",9),b.Rb(),b.Sb(90,"mat-error"),b.Dc(91),b.Rb(),b.Rb(),b.Rb(),b.Sb(92,"form",23),b.Sb(93,"div",24),b.Bc(94,X,1,1,"mat-spinner",18),b.Sb(95,"input",25),b.ac("change",(function(t){return e.onFileChange(t)})),b.Rb(),b.Rb(),b.Sb(96,"div",26),b.Sb(97,"button",27),b.ac("click",(function(){return e.autoEvaluation()})),b.Sb(98,"mat-icon"),b.Dc(99,"assignment_turned_in"),b.Rb(),b.Rb(),b.Sb(100,"button",28),b.ac("click",(function(){return e.addItem()})),b.Sb(101,"mat-icon"),b.Dc(102,"add"),b.Rb(),b.Rb(),b.Rb(),b.Sb(103,"div",26),b.Bc(104,K,1,1,"mat-spinner",29),b.Dc(105),b.Rb(),b.Bc(106,tt,40,13,"div",30),b.Rb(),b.Rb()),2&t&&(b.jc("ngIf",e.loading),b.Bb(1),b.jc("formGroup",e.mainForm),b.Bb(2),b.Ec(e.title),b.Bb(3),b.jc("placeholder",e.dictionary.translate("name")),b.Bb(2),b.jc("ngIf",e.name.invalid&&e.name.errors.required),b.Bb(1),b.jc("ngIf",e.name.invalid&&e.name.errors.maxlength),b.Bb(2),b.jc("placeholder",e.dictionary.translate("noRevision")),b.Bb(2),b.jc("ngIf",e.noRevision.invalid&&e.noRevision.errors.required),b.Bb(1),b.jc("ngIf",e.noRevision.invalid&&e.noRevision.errors.maxlength),b.Bb(4),b.Ec(e.dictionary.translate("type")),b.Bb(2),b.jc("ngForOf",e.typeList),b.Bb(2),b.jc("ngIf",e.type.invalid&&e.type.errors.required),b.Bb(3),b.Ec(e.dictionary.translate("nivelService")),b.Bb(2),b.jc("ngForOf",e.nServiceList),b.Bb(2),b.Fc(" ",e.dictionary.translate("mandatoryField")," "),b.Bb(3),b.Ec(e.dictionary.translate("status")),b.Bb(2),b.jc("ngForOf",e.statusList),b.Bb(2),b.Fc(" ",e.dictionary.translate("mandatoryField")," "),b.Bb(3),b.jc("placeholder",e.dictionary.translate("so")),b.Bb(2),b.jc("ngIf",e.so.invalid&&e.so.errors.required),b.Bb(1),b.jc("ngIf",e.so.invalid&&e.so.errors.maxlength),b.Bb(2),b.jc("placeholder",e.dictionary.translate("esn")),b.Bb(2),b.jc("ngIf",e.esn.invalid&&e.esn.errors.required),b.Bb(1),b.jc("ngIf",e.esn.invalid&&e.esn.errors.maxlength),b.Bb(2),b.jc("placeholder",e.dictionary.translate("cpl")),b.Bb(2),b.jc("ngIf",e.cpl.invalid&&e.cpl.errors.required),b.Bb(1),b.jc("ngIf",e.cpl.invalid&&e.cpl.errors.maxlength),b.Bb(4),b.Ec(e.dictionary.translate("region")),b.Bb(2),b.jc("ngForOf",e.regionList),b.Bb(2),b.Fc(" ",e.dictionary.translate("mandatoryField")," "),b.Bb(3),b.Ec(e.dictionary.translate("dist")),b.Bb(2),b.jc("ngForOf",e.distList),b.Bb(2),b.Fc(" ",e.dictionary.translate("mandatoryField")," "),b.Bb(1),b.jc("ngIf",e.loadDist),b.Bb(3),b.Ec(e.dictionary.translate("model")),b.Bb(2),b.jc("ngForOf",e.modelsList),b.Bb(2),b.Fc(" ",e.dictionary.translate("mandatoryField")," "),b.Bb(1),b.jc("ngIf",e.loadModel),b.Bb(4),b.Ec(e.dictionary.translate("oem")),b.Bb(2),b.jc("ngForOf",e.oemList),b.Bb(2),b.Fc(" ",e.dictionary.translate("mandatoryField")," "),b.Bb(3),b.Ec(e.dictionary.translate("channel")),b.Bb(2),b.jc("ngForOf",e.channelList),b.Bb(2),b.Fc(" ",e.dictionary.translate("mandatoryField")," "),b.Bb(1),b.jc("formGroup",e.orderForm),b.Bb(2),b.jc("ngIf",e.loadProd),b.Bb(1),b.jc("disabled",e.loadProd),b.Bb(9),b.jc("ngIf",e.messageLoad),b.Bb(1),b.Fc(" ",e.messageLoad," "),b.Bb(1),b.jc("ngForOf",e.orderForm.get("items").controls))},directives:[a.l,s.v,s.o,v.d,v.a,v.c,s.h,S.c,s.d,R.b,s.n,s.g,s.t,S.b,v.b,S.f,B.a,a.k,F.b,D.a,o.o,x.n,w.c,s.e,s.i,C.c,C.a,s.r,s.a],pipes:[a.b],styles:[".mat-dialog-content[_ngcontent-%COMP%]{display:block;margin:0 -24px;padding:0 24px;max-height:65vh;overflow:auto;width:450px}.form-parts-matrix[_ngcontent-%COMP%]{width:100%}.cdk-overlay-pane[_ngcontent-%COMP%]{width:800px!important}"]}),t})(),it=(()=>{class t{constructor(t,e,i){this.data=t,this.dialogRef=e,this.message=i,this.loading=!1}ngOnInit(){}onClose(){this.dialogRef.close(),console.log()}onSubmit(){this.loading=!0,this.mfc.disableFields();try{this.mfc.submit().subscribe(t=>{this.loading=!1,this.mfc.enableFields(),this.message.show(this.data.dictionary.translate("saveData")),console.log("Res ",t),this.dialogRef.close()},t=>{this.loading=!1,this.mfc.enableFields(),this.message.show(t.message||"Error de conexi\xf3n")})}catch(t){this.loading=!1,console.log("Err ",t),this.mfc.enableFields()}}}return t.\u0275fac=function(e){return new(e||t)(b.Mb(d.a),b.Mb(d.f),b.Mb(o.i))},t.\u0275cmp=b.Gb({type:t,selectors:[["pat-main-form-dialog"]],viewQuery:function(t,e){var i;1&t&&b.Hc(et,!0),2&t&&b.pc(i=b.bc())&&(e.mfc=i.first)},decls:2,vars:7,consts:[[3,"disabled","loading","title","submitText","cancelText","closeEvent","submitEvent"],[3,"dictionary","data"]],template:function(t,e){1&t&&(b.Sb(0,"shared-form-dialog",0),b.ac("closeEvent",(function(){return e.onClose()}))("submitEvent",(function(){return e.onSubmit()})),b.Nb(1,"pat-main-form",1),b.Rb()),2&t&&(b.jc("disabled",e.loading||!(null!=e.mfc&&e.mfc.mainForm.valid)||(null==e.mfc?null:e.mfc.orderForm.get("items").invalid))("loading",e.loading)("title",e.title)("submitText",e.data.dictionary.translate("save"))("cancelText",e.data.dictionary.translate("cancel")),b.Bb(1),b.jc("dictionary",e.data.dictionary)("data",e.data.part))},directives:[o.f,et],styles:[""]}),t})();var at=i("FlRo"),nt=i("iAde"),st=i("cePI"),ot=i("Jb3d");function rt(t,e){1&t&&b.Nb(0,"shared-progress-bar")}function ct(t,e){if(1&t&&(b.Sb(0,"th",21),b.Dc(1),b.Rb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("matriz")," ")}}function lt(t,e){if(1&t&&(b.Sb(0,"td",22),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.Bb(1),b.Fc(" ",t.nombre," ")}}function dt(t,e){if(1&t&&(b.Sb(0,"th",21),b.Dc(1),b.Rb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("noRevision")," ")}}function bt(t,e){if(1&t&&(b.Sb(0,"td",22),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.Bb(1),b.Fc(" ",t.noRevision," ")}}function mt(t,e){if(1&t&&(b.Sb(0,"th",21),b.Dc(1),b.Rb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("status")," ")}}function ut(t,e){if(1&t&&(b.Sb(0,"td",22),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.Bb(1),b.Fc(" ",t.status," ")}}function ht(t,e){if(1&t&&(b.Sb(0,"th",21),b.Dc(1),b.Rb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("nivel")," ")}}function pt(t,e){if(1&t&&(b.Sb(0,"td",22),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.Bb(1),b.Fc(" ",t.nivel," ")}}function ft(t,e){if(1&t&&(b.Sb(0,"th",21),b.Dc(1),b.Rb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("DateCreate")," ")}}function gt(t,e){if(1&t&&(b.Sb(0,"td",22),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.Bb(1),b.Fc(" ",t.creationDate," ")}}function yt(t,e){if(1&t&&(b.Sb(0,"th",21),b.Dc(1),b.Rb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("DateUpdate")," ")}}function vt(t,e){if(1&t&&(b.Sb(0,"td",22),b.Dc(1),b.Rb()),2&t){const t=e.$implicit;b.Bb(1),b.Fc(" ",t.lastUpdateDate," ")}}function St(t,e){if(1&t&&(b.Sb(0,"th",23),b.Dc(1),b.Rb()),2&t){const t=b.ec();b.Bb(1),b.Fc(" ",t.dictionary.translate("actions")," ")}}function Rt(t,e){if(1&t){const t=b.Tb();b.Sb(0,"td",22),b.Sb(1,"button",24),b.Sb(2,"mat-icon"),b.Dc(3,"more_vert"),b.Rb(),b.Rb(),b.Sb(4,"mat-menu",null,25),b.Sb(6,"button",26),b.ac("click",(function(){b.sc(t);const i=e.$implicit;return b.ec().onEdit(i)})),b.Sb(7,"mat-icon"),b.Dc(8,"edit"),b.Rb(),b.Sb(9,"span"),b.Dc(10,"Editar"),b.Rb(),b.Rb(),b.Sb(11,"button",26),b.ac("click",(function(){b.sc(t);const i=e.$implicit;return b.ec().onDelete(i)})),b.Sb(12,"mat-icon"),b.Dc(13,"delete"),b.Rb(),b.Sb(14,"span"),b.Dc(15,"Borrar"),b.Rb(),b.Rb(),b.Rb(),b.Rb()}if(2&t){const t=b.qc(5),e=b.ec();b.Bb(1),b.jc("matMenuTriggerFor",t),b.Bb(5),b.jc("matTooltip",e.dictionary.translate("edit")),b.Bb(5),b.jc("matTooltip",e.dictionary.translate("deleted"))}}function Bt(t,e){1&t&&b.Nb(0,"tr",27)}function Ft(t,e){1&t&&b.Nb(0,"tr",28)}function Dt(t,e){if(1&t&&(b.Sb(0,"tr",29),b.Sb(1,"td",30),b.Dc(2),b.Rb(),b.Rb()),2&t){const t=b.ec(),e=b.qc(5);b.Bb(2),b.Gc("",t.dictionary.translate("notDatafind"),'"',e.value,'"')}}const xt=function(){return[5,10,25,100]};let wt=(()=>{class t{constructor(t,e,i,a){this.mts=t,this.message=e,this.dialog=i,this.mps=a,this.displayedColumns=["name","revision","status","nivel","dateCreate","dateUpdate","options"],this.columns=Ct,this.loading=!1,this.operations=Nt,this.subscriptions=[],this.getDataTable()}ngOnInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngAfterViewInit(){this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort}ngOnDestroy(){}getDataTable(){this.loading=!0,this.mps.getActivesData().subscribe(t=>{this.loading=!1,console.log("Data Table ",t),this.dataSource=new at.l(t),this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort,this.setFilterSearch()})}setFilterSearch(){this.dataSource.filterPredicate=(t,e)=>{const i=Object.keys(t).reduce((e,i)=>e+t[i]+"\u25ec","").normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase(),a=e.trim().normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase();return-1!=i.indexOf(a)}}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}onOperation(t){switch(t.operation){case"edit":this.onEdit(t.item);break;case"delete":this.onDelete(t.item)}}onEdit(t){this.dialog.open(it,{disableClose:!0,width:"1400px",height:"900px",data:{dictionary:this.dictionary,part:t}}).afterClosed().subscribe(t=>{this.getDataTable(),t&&(this.getDataTable(),this.message.genericSaveMessage())},t=>this.message.show(t.message||"Error de conexi\xf3n"))}onDelete(t){this.loading=!0,this.mps.delete(t.all.idMatriz).subscribe(()=>{this.message.show(this.dictionary.translate("dataDeleted")),this.getDataTable(),this.loading=!1},t=>{this.message.show(t.message||"Error de conexi\xf3n"),this.loading=!1})}onAdd(){this.dialog.open(it,{disableClose:!0,width:"1400px",height:"900px",data:{dictionary:this.dictionary,part:null}}).afterClosed().subscribe(t=>{console.log("Res",t),this.getDataTable(),t&&(console.log("result",t),this.message.genericSaveMessage(),this.getDataTable())},t=>this.message.show(t.message||"Error de conexi\xf3n"))}eventListeners(){this.subscriptions.push(this.mts.dataEvent.subscribe(t=>this.operations.forEach(e=>e.disabled=0===t.length)))}}return t.\u0275fac=function(e){return new(e||t)(b.Mb(y),b.Mb(o.i),b.Mb(d.b),b.Mb(o.l))},t.\u0275cmp=b.Gb({type:t,selectors:[["pat-main-table"]],viewQuery:function(t,e){var i;1&t&&(b.Hc(nt.a,!0),b.Hc(st.a,!0)),2&t&&(b.pc(i=b.bc())&&(e.paginator=i.first),b.pc(i=b.bc())&&(e.sort=i.first))},inputs:{dictionary:"dictionary"},decls:34,vars:8,consts:[[4,"ngIf"],["fxLayoutAlign","center center",1,"pmt-search",2,"width","100%"],["matInput","",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","matSort","",2,"width","100%",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","revision"],["matColumnDef","status"],["matColumnDef","nivel"],["matColumnDef","dateCreate"],["matColumnDef","dateUpdate"],["matColumnDef","options"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],[3,"pageSizeOptions"],[3,"text","callback"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","aria-label","Example icon-button with a menu",3,"matMenuTriggerFor"],["menu","matMenu"],["mat-menu-item","",3,"matTooltip","click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(t,e){1&t&&(b.Bc(0,rt,1,0,"shared-progress-bar",0),b.Sb(1,"mat-form-field",1),b.Sb(2,"mat-label"),b.Dc(3),b.Rb(),b.Sb(4,"input",2,3),b.ac("keyup",(function(t){return e.applyFilter(t)})),b.Rb(),b.Rb(),b.Sb(6,"div",4),b.Sb(7,"table",5),b.Qb(8,6),b.Bc(9,ct,2,1,"th",7),b.Bc(10,lt,2,1,"td",8),b.Pb(),b.Qb(11,9),b.Bc(12,dt,2,1,"th",7),b.Bc(13,bt,2,1,"td",8),b.Pb(),b.Qb(14,10),b.Bc(15,mt,2,1,"th",7),b.Bc(16,ut,2,1,"td",8),b.Pb(),b.Qb(17,11),b.Bc(18,ht,2,1,"th",7),b.Bc(19,pt,2,1,"td",8),b.Pb(),b.Qb(20,12),b.Bc(21,ft,2,1,"th",7),b.Bc(22,gt,2,1,"td",8),b.Pb(),b.Qb(23,13),b.Bc(24,yt,2,1,"th",7),b.Bc(25,vt,2,1,"td",8),b.Pb(),b.Qb(26,14),b.Bc(27,St,2,1,"th",15),b.Bc(28,Rt,16,3,"td",8),b.Pb(),b.Bc(29,Bt,1,0,"tr",16),b.Bc(30,Ft,1,0,"tr",17),b.Bc(31,Dt,3,2,"tr",18),b.Rb(),b.Nb(32,"mat-paginator",19),b.Rb(),b.Sb(33,"shared-add-button",20),b.ac("callback",(function(){return e.onAdd()})),b.Rb()),2&t&&(b.jc("ngIf",e.loading),b.Bb(3),b.Ec(e.dictionary.translate("search")),b.Bb(4),b.jc("dataSource",e.dataSource),b.Bb(22),b.jc("matHeaderRowDef",e.displayedColumns),b.Bb(1),b.jc("matRowDefColumns",e.displayedColumns),b.Bb(2),b.jc("pageSizeOptions",b.mc(7,xt)),b.Bb(1),b.jc("text",e.dictionary.translate("addPart")))},directives:[a.l,S.c,v.c,S.f,R.b,at.k,st.a,at.c,at.e,at.b,at.g,at.j,at.h,nt.a,o.a,o.o,at.d,st.b,at.a,F.b,ot.c,D.a,ot.d,ot.a,at.f,at.i],styles:["table[_ngcontent-%COMP%]{width:100%!important}.pmt-search[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{width:100%}"]}),t})();const Ct=[{key:"nombre",label:"Matriz"},{key:"noRevision",label:"noRevision"},{key:"status",label:"status"},{key:"nivel",label:"Nivel"},{key:"creationDate",label:"DateCreate"},{key:"lastUpdateDate",label:"DateUpdate"},{key:"operations",label:"actions",type:o.b.Operations,value:[{label:"edit",matIcon:"edit",operation:"edit"},{label:"delete",matIcon:"delete",operation:"delete"}]}],Nt=[{disabled:!1,faIcon:"faFileExcel",label:"Exportar Reporte",operation:"export"}];function jt(t,e){1&t&&b.Nb(0,"shared-progress-bar")}function Lt(t,e){if(1&t&&(b.Sb(0,"div"),b.Nb(1,"pat-main-table",1),b.Rb()),2&t){const t=b.ec();b.Bb(1),b.jc("dictionary",t.dictionary)}}let Pt=(()=>{class t{constructor(t,e,i,a){this.dialog=t,this.message=e,this.mts=i,this.tls=a,this.dictionary=new o.h,this.fields=Et,this.loading=!1,this.flag=!1}ngOnInit(){this.tls.getLenguaje().subscribe(t=>{this.dictionary.setLanguage(t.language),this.flag=!0})}onAdd(){this.dialog.open(it,{disableClose:!0,data:{dictionary:this.dictionary,part:null}}).afterClosed().pipe(Object(l.a)(()=>this.mts.loadData().subscribe())).subscribe(t=>{t&&(this.mts.push(t),this.message.genericSaveMessage())},t=>this.message.show(t.message||"Error de conexi\xf3n"))}onSearch(t){return this.loading=!0,t?this.mts.loadData(t).pipe(Object(l.a)(()=>this.loading=!1)).subscribe(()=>{},t=>this.message.genericHttpError(t.message||"Error de conexi\xf3n")):this.mts.loadData().pipe(Object(l.a)(()=>this.loading=!1)).subscribe(),null}}return t.\u0275fac=function(e){return new(e||t)(b.Mb(d.b),b.Mb(o.i),b.Mb(y),b.Mb(o.v))},t.\u0275cmp=b.Gb({type:t,selectors:[["pat-main-view"]],decls:3,vars:2,consts:[[4,"ngIf"],[3,"dictionary"]],template:function(t,e){1&t&&(b.Bc(0,jt,1,0,"shared-progress-bar",0),b.Nb(1,"br"),b.Bc(2,Lt,2,1,"div",0)),2&t&&(b.jc("ngIf",e.loading),b.Bb(2),b.jc("ngIf",e.flag))},directives:[a.l,o.o,wt],styles:[""]}),t})();const Et=[{label:"Matriz",type:"text",value:"matriz"},{label:"N Revisi\xf3n",type:"text",value:"noRevision"},{label:"Estatus",type:"text",value:"status"},{label:"Nivel",type:"text",value:"nivel"},{label:"Fecha Creaci\xf3n",type:"text",value:"creationDate"},{label:"Ult. Modificaci\xf3n",type:"text",value:"lastUpdateDate"}],It=[{component:Pt,path:""}];let Mt=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},imports:[[c.a.forChild(It)],c.a]}),t})();var kt=i("gcUQ"),Ot=i("KZIX"),qt=i("k8N0"),At=i("66mq");let Tt=(()=>{class t{}return t.\u0275mod=b.Kb({type:t}),t.\u0275inj=b.Jb({factory:function(e){return new(e||t)},imports:[[a.c,Mt,n.a,s.j,kt.c,S.e,R.c,x.m,B.b,Ot.a,at.m,C.b,s.s,st.c,nt.b,qt.a,o.s,r.a,F.c,d.e,D.b,ot.b,At.b,w.b,g.b,w.b]]}),t})()}}]);